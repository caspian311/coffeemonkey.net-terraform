{
    "version": 3,
    "terraform_version": "0.11.1",
    "serial": 19,
    "lineage": "3c5c5167-1d30-4d7a-8c24-d2a625728cde",
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {},
            "resources": {
                "aws_api_gateway_rest_api.api": {
                    "type": "aws_api_gateway_rest_api",
                    "depends_on": [],
                    "primary": {
                        "id": "8onw2k1yti",
                        "attributes": {
                            "binary_media_types.#": "0",
                            "created_date": "2018-04-08T21:53:28Z",
                            "description": "",
                            "id": "8onw2k1yti",
                            "name": "coffeemonkey",
                            "root_resource_id": "edb4ogcqj8"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_cloudfront_distribution.website_distribution": {
                    "type": "aws_cloudfront_distribution",
                    "depends_on": [
                        "aws_s3_bucket.web_site_bucket",
                        "data.aws_acm_certificate.ssl_cert"
                    ],
                    "primary": {
                        "id": "E1ZYRLRNX1Y774",
                        "attributes": {
                            "active_trusted_signers.%": "2",
                            "active_trusted_signers.enabled": "false",
                            "active_trusted_signers.items.#": "0",
                            "aliases.#": "0",
                            "arn": "arn:aws:cloudfront::792688616974:distribution/E1ZYRLRNX1Y774",
                            "cache_behavior.#": "0",
                            "caller_reference": "1509883117821",
                            "custom_error_response.#": "0",
                            "default_cache_behavior.#": "1",
                            "default_cache_behavior.2256310573.allowed_methods.#": "2",
                            "default_cache_behavior.2256310573.allowed_methods.0": "HEAD",
                            "default_cache_behavior.2256310573.allowed_methods.1": "GET",
                            "default_cache_behavior.2256310573.cached_methods.#": "2",
                            "default_cache_behavior.2256310573.cached_methods.0": "HEAD",
                            "default_cache_behavior.2256310573.cached_methods.1": "GET",
                            "default_cache_behavior.2256310573.compress": "false",
                            "default_cache_behavior.2256310573.default_ttl": "3600",
                            "default_cache_behavior.2256310573.forwarded_values.#": "1",
                            "default_cache_behavior.2256310573.forwarded_values.2759845635.cookies.#": "1",
                            "default_cache_behavior.2256310573.forwarded_values.2759845635.cookies.2625240281.forward": "none",
                            "default_cache_behavior.2256310573.forwarded_values.2759845635.cookies.2625240281.whitelisted_names.#": "0",
                            "default_cache_behavior.2256310573.forwarded_values.2759845635.headers.#": "0",
                            "default_cache_behavior.2256310573.forwarded_values.2759845635.query_string": "false",
                            "default_cache_behavior.2256310573.forwarded_values.2759845635.query_string_cache_keys.#": "0",
                            "default_cache_behavior.2256310573.lambda_function_association.#": "0",
                            "default_cache_behavior.2256310573.max_ttl": "86400",
                            "default_cache_behavior.2256310573.min_ttl": "0",
                            "default_cache_behavior.2256310573.smooth_streaming": "false",
                            "default_cache_behavior.2256310573.target_origin_id": "websiteS3Origin",
                            "default_cache_behavior.2256310573.trusted_signers.#": "0",
                            "default_cache_behavior.2256310573.viewer_protocol_policy": "allow-all",
                            "default_root_object": "index.html",
                            "domain_name": "d1mo4kjbzkia7p.cloudfront.net",
                            "enabled": "true",
                            "etag": "EQTLX2G8BO5UJ",
                            "hosted_zone_id": "Z2FDTNDATAQYW2",
                            "http_version": "http2",
                            "id": "E1ZYRLRNX1Y774",
                            "in_progress_validation_batches": "0",
                            "is_ipv6_enabled": "false",
                            "last_modified_time": "2018-04-07 18:47:38.513 +0000 UTC",
                            "logging_config.#": "0",
                            "origin.#": "1",
                            "origin.485305800.custom_header.#": "0",
                            "origin.485305800.custom_origin_config.#": "0",
                            "origin.485305800.domain_name": "coffeemonkey.net.s3.amazonaws.com",
                            "origin.485305800.origin_id": "websiteS3Origin",
                            "origin.485305800.origin_path": "",
                            "origin.485305800.s3_origin_config.#": "0",
                            "price_class": "PriceClass_All",
                            "restrictions.#": "1",
                            "restrictions.811065190.geo_restriction.#": "1",
                            "restrictions.811065190.geo_restriction.1303118592.locations.#": "4",
                            "restrictions.811065190.geo_restriction.1303118592.locations.0": "CA",
                            "restrictions.811065190.geo_restriction.1303118592.locations.1": "DE",
                            "restrictions.811065190.geo_restriction.1303118592.locations.2": "GB",
                            "restrictions.811065190.geo_restriction.1303118592.locations.3": "US",
                            "restrictions.811065190.geo_restriction.1303118592.restriction_type": "whitelist",
                            "retain_on_delete": "false",
                            "status": "Deployed",
                            "tags.%": "1",
                            "tags.Environment": "production",
                            "viewer_certificate.#": "1",
                            "viewer_certificate.1627909871.acm_certificate_arn": "arn:aws:acm:us-east-1:792688616974:certificate/3f376ced-33ce-4f12-94de-9cfd1ac55750",
                            "viewer_certificate.1627909871.cloudfront_default_certificate": "false",
                            "viewer_certificate.1627909871.iam_certificate_id": "",
                            "viewer_certificate.1627909871.minimum_protocol_version": "TLSv1",
                            "viewer_certificate.1627909871.ssl_support_method": "sni-only",
                            "web_acl_id": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_iam_role.lambda-role": {
                    "type": "aws_iam_role",
                    "depends_on": [],
                    "primary": {
                        "id": "lambda-role",
                        "attributes": {
                            "arn": "arn:aws:iam::792688616974:role/lambda-role",
                            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
                            "create_date": "2018-04-08T21:37:53Z",
                            "force_detach_policies": "false",
                            "id": "lambda-role",
                            "name": "lambda-role",
                            "path": "/",
                            "unique_id": "AROAJUGCQFY27N7Y47PAY"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_lambda_function.login-lambda": {
                    "type": "aws_lambda_function",
                    "depends_on": [
                        "aws_iam_role.lambda-role"
                    ],
                    "primary": {
                        "id": "login",
                        "attributes": {
                            "arn": "arn:aws:lambda:us-east-1:792688616974:function:login",
                            "dead_letter_config.#": "0",
                            "description": "",
                            "environment.#": "0",
                            "filename": "lambda.zip",
                            "function_name": "login",
                            "handler": "login.lambda_handler",
                            "id": "login",
                            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:792688616974:function:login/invocations",
                            "kms_key_arn": "",
                            "last_modified": "2018-04-08T21:51:59.401+0000",
                            "memory_size": "128",
                            "publish": "false",
                            "qualified_arn": "arn:aws:lambda:us-east-1:792688616974:function:login:$LATEST",
                            "reserved_concurrent_executions": "0",
                            "role": "arn:aws:iam::792688616974:role/lambda-role",
                            "runtime": "python2.7",
                            "source_code_hash": "cRTukIdf6i0+rGt8C9W8N9n+Kz7XKLP8ZEDPKHKQt90=",
                            "tags.%": "0",
                            "timeout": "3",
                            "tracing_config.#": "1",
                            "tracing_config.0.mode": "PassThrough",
                            "version": "$LATEST",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_lambda_function.movies-lambda": {
                    "type": "aws_lambda_function",
                    "depends_on": [
                        "aws_iam_role.lambda-role"
                    ],
                    "primary": {
                        "id": "movies",
                        "attributes": {
                            "arn": "arn:aws:lambda:us-east-1:792688616974:function:movies",
                            "dead_letter_config.#": "0",
                            "description": "",
                            "environment.#": "0",
                            "filename": "lambda.zip",
                            "function_name": "movies",
                            "handler": "movies.lambda_handler",
                            "id": "movies",
                            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:792688616974:function:movies/invocations",
                            "kms_key_arn": "",
                            "last_modified": "2018-04-08T21:51:59.177+0000",
                            "memory_size": "128",
                            "publish": "false",
                            "qualified_arn": "arn:aws:lambda:us-east-1:792688616974:function:movies:$LATEST",
                            "reserved_concurrent_executions": "0",
                            "role": "arn:aws:iam::792688616974:role/lambda-role",
                            "runtime": "python2.7",
                            "source_code_hash": "cRTukIdf6i0+rGt8C9W8N9n+Kz7XKLP8ZEDPKHKQt90=",
                            "tags.%": "0",
                            "timeout": "3",
                            "tracing_config.#": "1",
                            "tracing_config.0.mode": "PassThrough",
                            "version": "$LATEST",
                            "vpc_config.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_s3_bucket.web_site_bucket": {
                    "type": "aws_s3_bucket",
                    "depends_on": [],
                    "primary": {
                        "id": "coffeemonkey.net",
                        "attributes": {
                            "acceleration_status": "",
                            "acl": "public-read",
                            "arn": "arn:aws:s3:::coffeemonkey.net",
                            "bucket": "coffeemonkey.net",
                            "bucket_domain_name": "coffeemonkey.net.s3.amazonaws.com",
                            "force_destroy": "false",
                            "hosted_zone_id": "Z3AQBSTGFYJSTF",
                            "id": "coffeemonkey.net",
                            "logging.#": "0",
                            "region": "us-east-1",
                            "request_payer": "BucketOwner",
                            "server_side_encryption_configuration.#": "0",
                            "tags.%": "0",
                            "versioning.#": "1",
                            "versioning.0.enabled": "false",
                            "versioning.0.mfa_delete": "false",
                            "website.#": "1",
                            "website.0.error_document": "error.html",
                            "website.0.index_document": "index.html",
                            "website.0.redirect_all_requests_to": "",
                            "website.0.routing_rules": "",
                            "website_domain": "s3-website-us-east-1.amazonaws.com",
                            "website_endpoint": "coffeemonkey.net.s3-website-us-east-1.amazonaws.com"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_s3_bucket.www_web_site_bucket": {
                    "type": "aws_s3_bucket",
                    "depends_on": [],
                    "primary": {
                        "id": "www.coffeemonkey.net",
                        "attributes": {
                            "acceleration_status": "",
                            "acl": "public-read",
                            "arn": "arn:aws:s3:::www.coffeemonkey.net",
                            "bucket": "www.coffeemonkey.net",
                            "bucket_domain_name": "www.coffeemonkey.net.s3.amazonaws.com",
                            "force_destroy": "false",
                            "hosted_zone_id": "Z3AQBSTGFYJSTF",
                            "id": "www.coffeemonkey.net",
                            "logging.#": "0",
                            "region": "us-east-1",
                            "request_payer": "BucketOwner",
                            "server_side_encryption_configuration.#": "0",
                            "tags.%": "0",
                            "versioning.#": "1",
                            "versioning.0.enabled": "false",
                            "versioning.0.mfa_delete": "false",
                            "website.#": "1",
                            "website.0.error_document": "error.html",
                            "website.0.index_document": "index.html",
                            "website.0.redirect_all_requests_to": "",
                            "website.0.routing_rules": "",
                            "website_domain": "s3-website-us-east-1.amazonaws.com",
                            "website_endpoint": "www.coffeemonkey.net.s3-website-us-east-1.amazonaws.com"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.aws_acm_certificate.ssl_cert": {
                    "type": "aws_acm_certificate",
                    "depends_on": [],
                    "primary": {
                        "id": "2018-04-08 21:52:48.465312664 +0000 UTC",
                        "attributes": {
                            "arn": "arn:aws:acm:us-east-1:792688616974:certificate/3f376ced-33ce-4f12-94de-9cfd1ac55750",
                            "domain": "coffeemonkey.net",
                            "id": "2018-04-08 21:52:48.465312664 +0000 UTC",
                            "statuses.#": "1",
                            "statuses.0": "ISSUED"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "login-endpoint"
            ],
            "outputs": {},
            "resources": {
                "aws_api_gateway_deployment.deployment": {
                    "type": "aws_api_gateway_deployment",
                    "depends_on": [
                        "aws_api_gateway_integration.integration"
                    ],
                    "primary": {
                        "id": "6714ap",
                        "attributes": {
                            "created_date": "2018-04-08T21:53:29Z",
                            "description": "",
                            "execution_arn": "arn:aws:execute-api:us-east-1:792688616974:8onw2k1yti/dev",
                            "id": "6714ap",
                            "invoke_url": "https://8onw2k1yti.execute-api.us-east-1.amazonaws.com/dev",
                            "rest_api_id": "8onw2k1yti",
                            "stage_name": "dev"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_api_gateway_integration.integration": {
                    "type": "aws_api_gateway_integration",
                    "depends_on": [
                        "aws_api_gateway_method.method",
                        "aws_api_gateway_resource.endpoint-resource"
                    ],
                    "primary": {
                        "id": "agi-8onw2k1yti-s0mkv1-POST",
                        "attributes": {
                            "cache_key_parameters.#": "0",
                            "cache_namespace": "s0mkv1",
                            "http_method": "POST",
                            "id": "agi-8onw2k1yti-s0mkv1-POST",
                            "integration_http_method": "POST",
                            "passthrough_behavior": "WHEN_NO_MATCH",
                            "request_parameters.%": "0",
                            "request_templates.%": "0",
                            "resource_id": "s0mkv1",
                            "rest_api_id": "8onw2k1yti",
                            "type": "AWS_PROXY",
                            "uri": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:792688616974:function:login/invocations"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_api_gateway_method.method": {
                    "type": "aws_api_gateway_method",
                    "depends_on": [
                        "aws_api_gateway_resource.endpoint-resource"
                    ],
                    "primary": {
                        "id": "agm-8onw2k1yti-s0mkv1-POST",
                        "attributes": {
                            "api_key_required": "false",
                            "authorization": "NONE",
                            "http_method": "POST",
                            "id": "agm-8onw2k1yti-s0mkv1-POST",
                            "resource_id": "s0mkv1",
                            "rest_api_id": "8onw2k1yti"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_api_gateway_method_settings.s": {
                    "type": "aws_api_gateway_method_settings",
                    "depends_on": [
                        "aws_api_gateway_method.method",
                        "aws_api_gateway_resource.endpoint-resource",
                        "aws_api_gateway_stage.stage"
                    ],
                    "primary": {
                        "id": "8onw2k1yti-prod-login/POST",
                        "attributes": {
                            "id": "8onw2k1yti-prod-login/POST",
                            "method_path": "login/POST",
                            "rest_api_id": "8onw2k1yti",
                            "settings.#": "1",
                            "settings.0.cache_data_encrypted": "false",
                            "settings.0.cache_ttl_in_seconds": "0",
                            "settings.0.caching_enabled": "false",
                            "settings.0.data_trace_enabled": "false",
                            "settings.0.logging_level": "INFO",
                            "settings.0.metrics_enabled": "true",
                            "settings.0.require_authorization_for_cache_control": "false",
                            "settings.0.throttling_burst_limit": "0",
                            "settings.0.throttling_rate_limit": "0",
                            "settings.0.unauthorized_cache_control_header_strategy": "",
                            "stage_name": "prod"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_api_gateway_resource.endpoint-resource": {
                    "type": "aws_api_gateway_resource",
                    "depends_on": [],
                    "primary": {
                        "id": "s0mkv1",
                        "attributes": {
                            "id": "s0mkv1",
                            "parent_id": "edb4ogcqj8",
                            "path": "/login",
                            "path_part": "login",
                            "rest_api_id": "8onw2k1yti"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_api_gateway_stage.stage": {
                    "type": "aws_api_gateway_stage",
                    "depends_on": [
                        "aws_api_gateway_deployment.deployment"
                    ],
                    "primary": {
                        "id": "ags-8onw2k1yti-prod",
                        "attributes": {
                            "cache_cluster_enabled": "false",
                            "cache_cluster_size": "",
                            "client_certificate_id": "",
                            "deployment_id": "6714ap",
                            "description": "",
                            "documentation_version": "",
                            "id": "ags-8onw2k1yti-prod",
                            "rest_api_id": "8onw2k1yti",
                            "stage_name": "prod",
                            "variables.%": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_lambda_permission.apigw_lambda": {
                    "type": "aws_lambda_permission",
                    "depends_on": [
                        "aws_api_gateway_method.method",
                        "aws_api_gateway_resource.endpoint-resource"
                    ],
                    "primary": {
                        "id": "AllowExecutionFromAPIGateway",
                        "attributes": {
                            "action": "lambda:InvokeFunction",
                            "function_name": "arn:aws:lambda:us-east-1:792688616974:function:login",
                            "id": "AllowExecutionFromAPIGateway",
                            "principal": "apigateway.amazonaws.com",
                            "qualifier": "",
                            "source_arn": "arn:aws:execute-api:us-east-1:792688616974:8onw2k1yti/*/POST/login",
                            "statement_id": "AllowExecutionFromAPIGateway"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "movies-endpoint"
            ],
            "outputs": {},
            "resources": {
                "aws_api_gateway_deployment.deployment": {
                    "type": "aws_api_gateway_deployment",
                    "depends_on": [
                        "aws_api_gateway_integration.integration"
                    ],
                    "primary": {
                        "id": "wxbggm",
                        "attributes": {
                            "created_date": "2018-04-08T21:53:30Z",
                            "description": "",
                            "execution_arn": "arn:aws:execute-api:us-east-1:792688616974:8onw2k1yti/dev",
                            "id": "wxbggm",
                            "invoke_url": "https://8onw2k1yti.execute-api.us-east-1.amazonaws.com/dev",
                            "rest_api_id": "8onw2k1yti",
                            "stage_name": "dev"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_api_gateway_integration.integration": {
                    "type": "aws_api_gateway_integration",
                    "depends_on": [
                        "aws_api_gateway_method.method",
                        "aws_api_gateway_resource.endpoint-resource"
                    ],
                    "primary": {
                        "id": "agi-8onw2k1yti-1bvmp9-GET",
                        "attributes": {
                            "cache_key_parameters.#": "0",
                            "cache_namespace": "1bvmp9",
                            "http_method": "GET",
                            "id": "agi-8onw2k1yti-1bvmp9-GET",
                            "integration_http_method": "POST",
                            "passthrough_behavior": "WHEN_NO_MATCH",
                            "request_parameters.%": "0",
                            "request_templates.%": "0",
                            "resource_id": "1bvmp9",
                            "rest_api_id": "8onw2k1yti",
                            "type": "AWS_PROXY",
                            "uri": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:792688616974:function:movies/invocations"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_api_gateway_method.method": {
                    "type": "aws_api_gateway_method",
                    "depends_on": [
                        "aws_api_gateway_resource.endpoint-resource"
                    ],
                    "primary": {
                        "id": "agm-8onw2k1yti-1bvmp9-GET",
                        "attributes": {
                            "api_key_required": "false",
                            "authorization": "NONE",
                            "http_method": "GET",
                            "id": "agm-8onw2k1yti-1bvmp9-GET",
                            "resource_id": "1bvmp9",
                            "rest_api_id": "8onw2k1yti"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_api_gateway_resource.endpoint-resource": {
                    "type": "aws_api_gateway_resource",
                    "depends_on": [],
                    "primary": {
                        "id": "1bvmp9",
                        "attributes": {
                            "id": "1bvmp9",
                            "parent_id": "edb4ogcqj8",
                            "path": "/movies",
                            "path_part": "movies",
                            "rest_api_id": "8onw2k1yti"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_lambda_permission.apigw_lambda": {
                    "type": "aws_lambda_permission",
                    "depends_on": [
                        "aws_api_gateway_method.method",
                        "aws_api_gateway_resource.endpoint-resource"
                    ],
                    "primary": {
                        "id": "AllowExecutionFromAPIGateway",
                        "attributes": {
                            "action": "lambda:InvokeFunction",
                            "function_name": "arn:aws:lambda:us-east-1:792688616974:function:movies",
                            "id": "AllowExecutionFromAPIGateway",
                            "principal": "apigateway.amazonaws.com",
                            "qualifier": "",
                            "source_arn": "arn:aws:execute-api:us-east-1:792688616974:8onw2k1yti/*/GET/movies",
                            "statement_id": "AllowExecutionFromAPIGateway"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                }
            },
            "depends_on": []
        }
    ]
}
